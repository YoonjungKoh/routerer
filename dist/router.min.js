!function(E){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=E();else if("function"==typeof define&&define.amd)define([],E);else{var n;"undefined"!=typeof window?n=window:"undefined"!=typeof global?n=global:"undefined"!=typeof self&&(n=self);n.router=E()}}(function(){return function n(q,t,l){function k(m,b){if(!t[m]){if(!q[m]){var e="function"==typeof require&&require;if(!b&&e)return e(m,!0);if(s)return s(m,!0);throw Error("Cannot find module '"+m+"'");}e=t[m]={exports:{}};
q[m][0].call(e.exports,function(b){var e=q[m][1][b];return k(e?e:b)},e,e.exports,n,q,t,l)}return t[m].exports}for(var s="function"==typeof require&&require,m=0;m<l.length;m++)k(l[m]);return k}({1:[function(n,q,t){(function(l){(function(k){"function"===typeof bootstrap?bootstrap("promise",k):"object"===typeof t?q.exports=k():"undefined"!==typeof ses?ses.ok()&&(ses.makeQ=k):Q=k()})(function(){function k(c){return function(){return S.apply(c,arguments)}}function s(c,g){if(B&&g.stack&&"object"===typeof c&&
null!==c&&c.stack&&-1===c.stack.indexOf(K)){for(var a=[],b=g;b;b=b.source)b.stack&&a.unshift(b.stack);a.unshift(c.stack);for(var a=a.join("\n"+K+"\n").split("\n"),b=[],f=0;f<a.length;++f){var d=a[f],e;if(e=m(d)){var h=e[1];e=e[0]===L&&h>=T&&h<=U}else e=!1;e||(e=d,e=-1!==e.indexOf("(module.js:")||-1!==e.indexOf("(node.js:")||!d);e||b.push(d)}a=b.join("\n");c.stack=a}}function m(c){var g=/at .+ \((.+):(\d+):(?:\d+)\)$/.exec(c);if(g||(g=/at ([^ ]+):(\d+):(?:\d+)$/.exec(c)))return[g[1],Number(g[2])];
if(c=/.*@(.+):(\d+)$/.exec(c))return[c[1],Number(c[2])]}function n(){if(B)try{throw Error();}catch(c){var g=c.stack.split("\n"),g=0<g[0].indexOf("@")?g[1]:g[2];if(g=m(g))return L=g[0],g[1]}}function b(c){return a(c)?c:f(c)?V(c):F(c)}function e(){function c(c){f=c;k.source=c;C(g,function(g,a){u(function(){c.promiseDispatch.apply(c,a)})},void 0);x=g=void 0}var g=[],x=[],f,d=G(e.prototype),k=G(h.prototype);k.promiseDispatch=function(c,a,b){var d=r(arguments);g?(g.push(d),"when"===a&&b[1]&&x.push(b[1])):
u(function(){f.promiseDispatch.apply(f,d)})};k.valueOf=function(){if(g)return k;var c=t(f);a(c)&&(f=c);return c};k.inspect=function(){return f?f.inspect():{state:"pending"}};if(b.longStackSupport&&B)try{throw Error();}catch(m){k.stack=m.stack.substring(m.stack.indexOf("\n")+1)}d.promise=k;d.resolve=function(g){f||c(b(g))};d.fulfill=function(g){f||c(F(g))};d.reject=function(g){f||c(w(g))};d.notify=function(c){f||C(x,function(g,a){u(function(){a(c)})},void 0)};return d}function p(c){if("function"!==
typeof c)throw new TypeError("resolver must be a function.");var g=e();try{c(g.resolve,g.reject,g.notify)}catch(a){g.reject(a)}return g.promise}function q(c){return p(function(g,a){for(var f=0,d=c.length;f<d;f++)b(c[f]).then(g,a)})}function h(c,g,a){void 0===g&&(g=function(c){return w(Error("Promise does not support operation: "+c))});void 0===a&&(a=function(){return{state:"unknown"}});var b=G(h.prototype);b.promiseDispatch=function(a,f,x){var d;try{d=c[f]?c[f].apply(b,x):g.call(b,f,x)}catch(e){d=
w(e)}a&&a(d)};if(b.inspect=a){var f=a();"rejected"===f.state&&(b.exception=f.reason);b.valueOf=function(){var c=a();return"pending"===c.state||"rejected"===c.state?b:c.value}}return b}function v(c,g,a,f){return b(c).then(g,a,f)}function t(c){if(a(c)){var g=c.inspect();if("fulfilled"===g.state)return g.value}return c}function a(c){return c===Object(c)&&"function"===typeof c.promiseDispatch&&"function"===typeof c.inspect}function f(c){return c===Object(c)&&"function"===typeof c.then}function d(){z.length=
0;D.length=0;A||(A=!0)}function X(c,g){A&&(D.push(c),g&&"undefined"!==typeof g.stack?z.push(g.stack):z.push("(no stack) "+g))}function w(c){var g=h({when:function(g){if(g&&A){var a=Y(D,this);-1!==a&&(D.splice(a,1),z.splice(a,1))}return g?g(c):this}},function(){return this},function(){return{state:"rejected",reason:c}});X(g,c);return g}function F(c){return h({when:function(){return c},get:function(g){return c[g]},set:function(g,a){c[g]=a},"delete":function(g){delete c[g]},post:function(g,a){return null===
g||void 0===g?c.apply(void 0,a):c[g].apply(c,a)},apply:function(g,a){return c.apply(g,a)},keys:function(){return Z(c)}},void 0,function(){return{state:"fulfilled",value:c}})}function V(c){var g=e();u(function(){try{c.then(g.resolve,g.reject,g.notify)}catch(a){g.reject(a)}});return g.promise}function M(c,g,a){return b(c).spread(g,a)}function N(c,g,a){return b(c).dispatch(g,a)}function y(c){return v(c,function(c){var b=0,f=e();C(c,function(d,e,h){var k;a(e)&&"fulfilled"===(k=e.inspect()).state?c[h]=
k.value:(++b,v(e,function(a){c[h]=a;0===--b&&f.resolve(c)},f.reject,function(c){f.notify({index:h,value:c})}))},void 0);0===b&&f.resolve(c);return f.promise})}function O(c){return v(c,function(c){c=H(c,b);return v(y(H(c,function(c){return v(c,P,P)})),function(){return c})})}var B=!1;try{throw Error();}catch($){B=!!$.stack}var T=n(),L,P=function(){},u=function(){function c(){for(;g.next;){g=g.next;var a=g.task;g.task=void 0;var f=g.domain;f&&(g.domain=void 0,f.enter());try{a()}catch(x){if(d)throw f&&
f.exit(),setTimeout(c,0),f&&f.enter(),x;setTimeout(function(){throw x;},0)}f&&f.exit()}b=!1}var g={task:void 0,next:null},a=g,b=!1,f=void 0,d=!1;u=function(c){a=a.next={task:c,domain:d&&l.domain,next:null};b||(b=!0,f())};if("undefined"!==typeof l&&l.nextTick)d=!0,f=function(){l.nextTick(c)};else if("function"===typeof setImmediate)f="undefined"!==typeof window?setImmediate.bind(window,c):function(){setImmediate(c)};else if("undefined"!==typeof MessageChannel){var e=new MessageChannel;e.port1.onmessage=
function(){f=h;e.port1.onmessage=c;c()};var h=function(){e.port2.postMessage(0)},f=function(){setTimeout(c,0);h()}}else f=function(){setTimeout(c,0)};return u}(),S=Function.call,r=k(Array.prototype.slice),C=k(Array.prototype.reduce||function(c,g){var a=0,b=this.length;if(1===arguments.length){do{if(a in this){g=this[a++];break}if(++a>=b)throw new TypeError;}while(1)}for(;a<b;a++)a in this&&(g=c(g,this[a],a));return g}),Y=k(Array.prototype.indexOf||function(c){for(var a=0;a<this.length;a++)if(this[a]===
c)return a;return-1}),H=k(Array.prototype.map||function(c,a){var b=this,f=[];C(b,function(d,e,h){f.push(c.call(a,e,h,b))},void 0);return f}),G=Object.create||function(c){function a(){}a.prototype=c;return new a},aa=k(Object.prototype.hasOwnProperty),Z=Object.keys||function(c){var a=[],b;for(b in c)aa(c,b)&&a.push(b);return a},ba=k(Object.prototype.toString),I;I="undefined"!==typeof ReturnValue?ReturnValue:function(c){this.value=c};var K="From previous event:";b.resolve=b;b.nextTick=u;b.longStackSupport=
!1;b.defer=e;e.prototype.makeNodeResolver=function(){var c=this;return function(a,b){a?c.reject(a):2<arguments.length?c.resolve(r(arguments,1)):c.resolve(b)}};b.Promise=p;b.promise=p;p.race=q;p.all=y;p.reject=w;p.resolve=b;b.passByCopy=function(c){return c};h.prototype.passByCopy=function(){return this};b.join=function(c,a){return b(c).join(a)};h.prototype.join=function(c){return b([this,c]).spread(function(c,a){if(c===a)return c;throw Error("Can't join: not the same: "+c+" "+a);})};b.race=q;h.prototype.race=
function(){return this.then(b.race)};b.makePromise=h;h.prototype.toString=function(){return"[object Promise]"};h.prototype.then=function(c,a,f){function d(a){try{return"function"===typeof c?c(a):a}catch(g){return w(g)}}function h(c){if("function"===typeof a){s(c,k);try{return a(c)}catch(b){return w(b)}}return w(c)}var k=this,m=e(),l=!1;u(function(){k.promiseDispatch(function(c){l||(l=!0,m.resolve(d(c)))},"when",[function(c){l||(l=!0,m.resolve(h(c)))}])});k.promiseDispatch(void 0,"when",[void 0,function(c){var a,
g=!1;try{a="function"===typeof f?f(c):c}catch(d){if(g=!0,b.onerror)b.onerror(d);else throw d;}g||m.notify(a)}]);return m.promise};b.when=v;h.prototype.thenResolve=function(c){return this.then(function(){return c})};b.thenResolve=function(c,a){return b(c).thenResolve(a)};h.prototype.thenReject=function(c){return this.then(function(){throw c;})};b.thenReject=function(c,a){return b(c).thenReject(a)};b.nearer=t;b.isPromise=a;b.isPromiseAlike=f;b.isPending=function(c){return a(c)&&"pending"===c.inspect().state};
h.prototype.isPending=function(){return"pending"===this.inspect().state};b.isFulfilled=function(c){return!a(c)||"fulfilled"===c.inspect().state};h.prototype.isFulfilled=function(){return"fulfilled"===this.inspect().state};b.isRejected=function(c){return a(c)&&"rejected"===c.inspect().state};h.prototype.isRejected=function(){return"rejected"===this.inspect().state};var z=[],D=[],A=!0;b.resetUnhandledRejections=d;b.getUnhandledReasons=function(){return z.slice()};b.stopUnhandledRejectionTracking=function(){d();
A=!1};d();b.reject=w;b.fulfill=F;b.master=function(c){return h({isDef:function(){}},function(a,b){return N(c,a,b)},function(){return b(c).inspect()})};b.spread=M;h.prototype.spread=function(c,a){return this.all().then(function(a){return c.apply(void 0,a)},a)};b.async=function(c){return function(){function a(c,g){var e;if("undefined"===typeof StopIteration){try{e=b[c](g)}catch(h){return w(h)}return e.done?e.value:v(e.value,f,d)}try{e=b[c](g)}catch(k){return"[object StopIteration]"===ba(k)||k instanceof
I?k.value:w(k)}return v(e,f,d)}var b=c.apply(this,arguments),f=a.bind(a,"next"),d=a.bind(a,"throw");return f()}};b.spawn=function(c){b.done(b.async(c)())};b["return"]=function(c){throw new I(c);};b.promised=function(c){return function(){return M([this,y(arguments)],function(a,b){return c.apply(a,b)})}};b.dispatch=N;h.prototype.dispatch=function(c,a){var b=this,f=e();u(function(){b.promiseDispatch(f.resolve,c,a)});return f.promise};b.get=function(c,a){return b(c).dispatch("get",[a])};h.prototype.get=
function(c){return this.dispatch("get",[c])};b.set=function(c,a,f){return b(c).dispatch("set",[a,f])};h.prototype.set=function(c,a){return this.dispatch("set",[c,a])};b.del=b["delete"]=function(c,a){return b(c).dispatch("delete",[a])};h.prototype.del=h.prototype["delete"]=function(c){return this.dispatch("delete",[c])};b.mapply=b.post=function(c,a,f){return b(c).dispatch("post",[a,f])};h.prototype.mapply=h.prototype.post=function(c,a){return this.dispatch("post",[c,a])};b.send=b.mcall=b.invoke=function(c,
a){return b(c).dispatch("post",[a,r(arguments,2)])};h.prototype.send=h.prototype.mcall=h.prototype.invoke=function(c){return this.dispatch("post",[c,r(arguments,1)])};b.fapply=function(c,a){return b(c).dispatch("apply",[void 0,a])};h.prototype.fapply=function(c){return this.dispatch("apply",[void 0,c])};b["try"]=b.fcall=function(c){return b(c).dispatch("apply",[void 0,r(arguments,1)])};h.prototype.fcall=function(){return this.dispatch("apply",[void 0,r(arguments)])};b.fbind=function(c){var a=b(c),
f=r(arguments,1);return function(){return a.dispatch("apply",[this,f.concat(r(arguments))])}};h.prototype.fbind=function(){var c=this,a=r(arguments);return function(){return c.dispatch("apply",[this,a.concat(r(arguments))])}};b.keys=function(c){return b(c).dispatch("keys",[])};h.prototype.keys=function(){return this.dispatch("keys",[])};b.all=y;h.prototype.all=function(){return y(this)};b.allResolved=function(c,a,b){return function(){"undefined"!==typeof console&&"function"===typeof console.warn&&
console.warn(a+" is deprecated, use "+b+" instead.",Error("").stack);return c.apply(c,arguments)}}(O,"allResolved","allSettled");h.prototype.allResolved=function(){return O(this)};b.allSettled=function(c){return b(c).allSettled()};h.prototype.allSettled=function(){return this.then(function(c){return y(H(c,function(c){function a(){return c.inspect()}c=b(c);return c.then(a,a)}))})};b.fail=b["catch"]=function(c,a){return b(c).then(void 0,a)};h.prototype.fail=h.prototype["catch"]=function(c){return this.then(void 0,
c)};b.progress=function(c,a){return b(c).then(void 0,void 0,a)};h.prototype.progress=function(c){return this.then(void 0,void 0,c)};b.fin=b["finally"]=function(c,a){return b(c)["finally"](a)};h.prototype.fin=h.prototype["finally"]=function(c){c=b(c);return this.then(function(a){return c.fcall().then(function(){return a})},function(a){return c.fcall().then(function(){throw a;})})};b.done=function(c,a,f,d){return b(c).done(a,f,d)};h.prototype.done=function(c,a,f){var d=function(a){u(function(){s(a,
e);if(b.onerror)b.onerror(a);else throw a;})},e=c||a||f?this.then(c,a,f):this;"object"===typeof l&&l&&l.domain&&(d=l.domain.bind(d));e.then(void 0,d)};b.timeout=function(a,f,d){return b(a).timeout(f,d)};h.prototype.timeout=function(a,b){var f=e(),d=setTimeout(function(){f.reject(Error(b||"Timed out after "+a+" ms"))},a);this.then(function(a){clearTimeout(d);f.resolve(a)},function(a){clearTimeout(d);f.reject(a)},f.notify);return f.promise};b.delay=function(a,f){void 0===f&&(f=a,a=void 0);return b(a).delay(f)};
h.prototype.delay=function(a){return this.then(function(b){var f=e();setTimeout(function(){f.resolve(b)},a);return f.promise})};b.nfapply=function(a,f){return b(a).nfapply(f)};h.prototype.nfapply=function(a){var b=e();a=r(a);a.push(b.makeNodeResolver());this.fapply(a).fail(b.reject);return b.promise};b.nfcall=function(a){var f=r(arguments,1);return b(a).nfapply(f)};h.prototype.nfcall=function(){var a=r(arguments),b=e();a.push(b.makeNodeResolver());this.fapply(a).fail(b.reject);return b.promise};b.nfbind=
b.denodeify=function(a){var f=r(arguments,1);return function(){var d=f.concat(r(arguments)),h=e();d.push(h.makeNodeResolver());b(a).fapply(d).fail(h.reject);return h.promise}};h.prototype.nfbind=h.prototype.denodeify=function(){var a=r(arguments);a.unshift(this);return b.denodeify.apply(void 0,a)};b.nbind=function(a,f){var d=r(arguments,2);return function(){var h=d.concat(r(arguments)),k=e();h.push(k.makeNodeResolver());b(function(){return a.apply(f,arguments)}).fapply(h).fail(k.reject);return k.promise}};
h.prototype.nbind=function(){var a=r(arguments,0);a.unshift(this);return b.nbind.apply(void 0,a)};b.nmapply=b.npost=function(a,f,d){return b(a).npost(f,d)};h.prototype.nmapply=h.prototype.npost=function(a,b){var f=r(b||[]),d=e();f.push(d.makeNodeResolver());this.dispatch("post",[a,f]).fail(d.reject);return d.promise};b.nsend=b.nmcall=b.ninvoke=function(a,f){var d=r(arguments,2),h=e();d.push(h.makeNodeResolver());b(a).dispatch("post",[f,d]).fail(h.reject);return h.promise};h.prototype.nsend=h.prototype.nmcall=
h.prototype.ninvoke=function(a){var b=r(arguments,1),f=e();b.push(f.makeNodeResolver());this.dispatch("post",[a,b]).fail(f.reject);return f.promise};b.nodeify=function(a,f){return b(a).nodeify(f)};h.prototype.nodeify=function(a){if(a)this.then(function(b){u(function(){a(null,b)})},function(b){u(function(){a(b)})});else return this};var U=n();return b})}).call(this,n("NPEqJt"))},{NPEqJt:6}],2:[function(n,q,t){function l(){}function k(){if(!v.XMLHttpRequest||"file:"==v.location.protocol&&v.ActiveXObject){try{return new ActiveXObject("Microsoft.XMLHTTP")}catch(a){}try{return new ActiveXObject("Msxml2.XMLHTTP.6.0")}catch(b){}try{return new ActiveXObject("Msxml2.XMLHTTP.3.0")}catch(d){}try{return new ActiveXObject("Msxml2.XMLHTTP")}catch(e){}}else return new XMLHttpRequest;
return!1}function s(a){if(a!==Object(a))return a;var b=[],d;for(d in a)null!=a[d]&&b.push(encodeURIComponent(d)+"="+encodeURIComponent(a[d]));return b.join("&")}function m(a){var b={};a=a.split("&");for(var d,e=0,h=a.length;e<h;++e)d=a[e],d=d.split("="),b[decodeURIComponent(d[0])]=decodeURIComponent(d[1]);return b}function R(a){return h(a.split(/ *; */),function(a,b){var e=b.split(/ *= */),h=e.shift(),e=e.shift();h&&e&&(a[h]=e);return a},{})}function b(a,b){this.req=a;this.xhr=this.req.xhr;this.text=
this.xhr.responseText;this.setStatusProperties(this.xhr.status);var d=this.xhr.getAllResponseHeaders().split(/\r?\n/),e={},h,k,m;d.pop();for(var l=0,s=d.length;l<s;++l)k=d[l],h=k.indexOf(":"),m=k.slice(0,h).toLowerCase(),h=W(k.slice(h+1)),e[m]=h;this.header=this.headers=e;this.header["content-type"]=this.xhr.getResponseHeader("content-type");this.setHeaderProperties(this.header);this.body="HEAD"!=this.req.method?this.parseBody(this.text):null}function e(a,f){var d=this;J.call(this);this._query=this._query||
[];this.method=a;this.url=f;this.header={};this._header={};this.on("end",function(){var f=new b(d);"HEAD"==a&&(f.text=null);d.callback(null,f)})}function p(a,b){return"function"==typeof b?(new e("GET",a)).end(b):1==arguments.length?new e("GET",a):new e(a,b)}var J=n("emitter"),h=n("reduce"),v="undefined"==typeof window?this:window,W="".trim?function(a){return a.trim()}:function(a){return a.replace(/(^\s*|\s*$)/g,"")};p.serializeObject=s;p.parseString=m;p.types={html:"text/html",json:"application/json",
xml:"application/xml",urlencoded:"application/x-www-form-urlencoded",form:"application/x-www-form-urlencoded","form-data":"application/x-www-form-urlencoded"};p.serialize={"application/x-www-form-urlencoded":s,"application/json":JSON.stringify};p.parse={"application/x-www-form-urlencoded":m,"application/json":JSON.parse};b.prototype.get=function(a){return this.header[a.toLowerCase()]};b.prototype.setHeaderProperties=function(a){a=this.header["content-type"]||"";this.type=a.split(/ *; */).shift();
a=R(a);for(var b in a)this[b]=a[b]};b.prototype.parseBody=function(a){var b=p.parse[this.type];return b?b(a):null};b.prototype.setStatusProperties=function(a){var b=a/100|0;this.status=a;this.statusType=b;this.info=1==b;this.ok=2==b;this.clientError=4==b;this.serverError=5==b;this.error=4==b||5==b?this.toError():!1;this.accepted=202==a;this.noContent=204==a||1223==a;this.badRequest=400==a;this.unauthorized=401==a;this.notAcceptable=406==a;this.notFound=404==a;this.forbidden=403==a};b.prototype.toError=
function(){var a=this.req,b=a.method,a=a.url,d=Error("cannot "+b+" "+a+" ("+this.status+")");d.status=this.status;d.method=b;d.url=a;return d};p.Response=b;J(e.prototype);e.prototype.use=function(a){a(this);return this};e.prototype.timeout=function(a){this._timeout=a;return this};e.prototype.clearTimeout=function(){this._timeout=0;clearTimeout(this._timer);return this};e.prototype.abort=function(){if(!this.aborted)return this.aborted=!0,this.xhr.abort(),this.clearTimeout(),this.emit("abort"),this};
e.prototype.set=function(a,b){if(a===Object(a)){for(var d in a)this.set(d,a[d]);return this}this._header[a.toLowerCase()]=b;this.header[a]=b;return this};e.prototype.getHeader=function(a){return this._header[a.toLowerCase()]};e.prototype.type=function(a){this.set("Content-Type",p.types[a]||a);return this};e.prototype.accept=function(a){this.set("Accept",p.types[a]||a);return this};e.prototype.auth=function(a,b){var d=btoa(a+":"+b);this.set("Authorization","Basic "+d);return this};e.prototype.query=
function(a){"string"!=typeof a&&(a=s(a));a&&this._query.push(a);return this};e.prototype.field=function(a,b){this._formData||(this._formData=new FormData);this._formData.append(a,b);return this};e.prototype.attach=function(a,b,d){this._formData||(this._formData=new FormData);this._formData.append(a,b,d);return this};e.prototype.send=function(a){var b=a===Object(a),d=this.getHeader("Content-Type"),e;if(e=b)e=this._data,e=e===Object(e);if(e)for(var h in a)this._data[h]=a[h];else"string"==typeof a?(d||
this.type("form"),d=this.getHeader("Content-Type"),this._data="application/x-www-form-urlencoded"==d?this._data?this._data+"&"+a:a:(this._data||"")+a):this._data=a;if(!b)return this;d||this.type("json");return this};e.prototype.callback=function(a,b){var d=this._callback;if(2==d.length)return d(a,b);if(a)return this.emit("error",a);d(b)};e.prototype.crossDomainError=function(){var a=Error("Origin is not allowed by Access-Control-Allow-Origin");a.crossDomain=!0;this.callback(a)};e.prototype.timeoutError=
function(){var a=this._timeout,b=Error("timeout of "+a+"ms exceeded");b.timeout=a;this.callback(b)};e.prototype.withCredentials=function(){this._withCredentials=!0;return this};e.prototype.end=function(a){var b=this,d=this.xhr=k(),e=this._query.join("&"),h=this._timeout,m=this._formData||this._data;this._callback=a||l;d.onreadystatechange=function(){if(4==d.readyState){if(0==d.status)return b.aborted?b.timeoutError():b.crossDomainError();b.emit("end")}};d.upload&&(d.upload.onprogress=function(a){a.percent=
a.loaded/a.total*100;b.emit("progress",a)});h&&!this._timer&&(this._timer=setTimeout(function(){b.abort()},h));e&&(e=p.serializeObject(e),this.url+=~this.url.indexOf("?")?"&"+e:"?"+e);d.open(this.method,this.url,!0);this._withCredentials&&(d.withCredentials=!0);if(a="GET"!=this.method)if(a="HEAD"!=this.method)if(a="string"!=typeof m){a:switch({}.toString.call(m)){case "[object File]":case "[object Blob]":case "[object FormData]":a=!0;break a;default:a=!1}a=!a}a&&(a=p.serialize[this.getHeader("Content-Type")])&&
(m=a(m));for(var s in this.header)null!=this.header[s]&&d.setRequestHeader(s,this.header[s]);this.emit("request",this);d.send(m);return this};p.Request=e;p.get=function(a,b,d){a=p("GET",a);"function"==typeof b&&(d=b,b=null);b&&a.query(b);d&&a.end(d);return a};p.head=function(a,b,d){a=p("HEAD",a);"function"==typeof b&&(d=b,b=null);b&&a.send(b);d&&a.end(d);return a};p.del=function(a,b){var d=p("DELETE",a);b&&d.end(b);return d};p.patch=function(a,b,d){a=p("PATCH",a);"function"==typeof b&&(d=b,b=null);
b&&a.send(b);d&&a.end(d);return a};p.post=function(a,b,d){a=p("POST",a);"function"==typeof b&&(d=b,b=null);b&&a.send(b);d&&a.end(d);return a};p.put=function(a,b,d){a=p("PUT",a);"function"==typeof b&&(d=b,b=null);b&&a.send(b);d&&a.end(d);return a};q.exports=p},{emitter:3,reduce:4}],3:[function(n,q,t){function l(k){if(k){for(var s in l.prototype)k[s]=l.prototype[s];return k}}q.exports=l;l.prototype.on=l.prototype.addEventListener=function(k,l){this._callbacks=this._callbacks||{};(this._callbacks[k]=
this._callbacks[k]||[]).push(l);return this};l.prototype.once=function(k,l){function m(){n.off(k,m);l.apply(this,arguments)}var n=this;this._callbacks=this._callbacks||{};m.fn=l;this.on(k,m);return this};l.prototype.off=l.prototype.removeListener=l.prototype.removeAllListeners=l.prototype.removeEventListener=function(k,l){this._callbacks=this._callbacks||{};if(0==arguments.length)return this._callbacks={},this;var m=this._callbacks[k];if(!m)return this;if(1==arguments.length)return delete this._callbacks[k],
this;for(var n,b=0;b<m.length;b++)if(n=m[b],n===l||n.fn===l){m.splice(b,1);break}return this};l.prototype.emit=function(k){this._callbacks=this._callbacks||{};var l=[].slice.call(arguments,1),m=this._callbacks[k];if(m)for(var m=m.slice(0),n=0,b=m.length;n<b;++n)m[n].apply(this,l);return this};l.prototype.listeners=function(k){this._callbacks=this._callbacks||{};return this._callbacks[k]||[]};l.prototype.hasListeners=function(k){return!!this.listeners(k).length}},{}],4:[function(n,q,t){q.exports=function(l,
k,n){for(var m=0,q=l.length,b=3==arguments.length?n:l[m++];m<q;)b=k.call(null,b,l[m],++m,l);return b}},{}],5:[function(n,q,t){var l=n("superagent"),k=n("q");q.exports=function(n,m){var q=m.Router.extend({routes:{logout:"logout"},getCurrentUser:function(){var b=k.defer();l.get("/v1/me").end(function(e){401==e.error.status?b.reject(Error("No user signed in.")):b.resolve(e.body)});return b.promise},execute:function(){n.isObject(this.currentPage)&&(n.isFunction(this.currentPage.close)?this.currentPage.close():
console.warn("Page has no `close` method!"));m.Router.prototype.execute.apply(this,arguments)},logout:function(){l.del("/v1/session").end(function(){window.location.replace("/")})}});q.addRoute=function(b,e){var k=n.uniqueId("handler");if(!e.prototype.close)throw Error("Page must have a close method");this.prototype.routes[b]=k;this.prototype[k]=function(){this.currentPage=new e({el:document.getElementById("page"),router:this})}};return q}},{q:1,superagent:2}],6:[function(n,q,t){function l(){}n=q.exports=
{};n.nextTick=function(){if("undefined"!==typeof window&&window.setImmediate)return function(k){return window.setImmediate(k)};if("undefined"!==typeof window&&window.postMessage&&window.addEventListener){var k=[];window.addEventListener("message",function(l){var m=l.source;m!==window&&null!==m||"process-tick"!==l.data||(l.stopPropagation(),0<k.length&&k.shift()())},!0);return function(l){k.push(l);window.postMessage("process-tick","*")}}return function(k){setTimeout(k,0)}}();n.title="browser";n.browser=
!0;n.env={};n.argv=[];n.on=l;n.addListener=l;n.once=l;n.off=l;n.removeListener=l;n.removeAllListeners=l;n.emit=l;n.binding=function(k){throw Error("process.binding is not supported");};n.cwd=function(){return"/"};n.chdir=function(k){throw Error("process.chdir is not supported");}},{}]},{},[5])(5)});
